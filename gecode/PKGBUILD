pkgname=gecode
pkgver=6.0.0
pkgrel=1
pkgdesc='Generic Constraint Development Environment'
arch=('x86_64')
url='http://www.gecode.org/'
license=('MIT')

source=("https://github.com/Gecode/gecode/archive/release-${pkgver}.tar.gz")
sha256sums=('58621b01fd069a488a3020491ec36b4293a5da42e7750bd8fc758b0c3a92daad')

options=('staticlibs')

depends=('qt5-base')

provides=('gecode')
conflicts=('gecode')

build() {
  cd "${srcdir}/${pkgname}-release-${pkgver}"
  ./configure --prefix=/usr --disable-examples --enable-cpprofiler
  make --jobs `nproc`
}

check() {
  cd "${srcdir}/${pkgname}-release-${pkgver}"
  make test --jobs `nproc`
}

package() {
  cd "${srcdir}/${pkgname}-release-${pkgver}"
  make DESTDIR=${pkgdir} install
  rm -r "${pkgdir}/usr/include/examples"
  find ${pkgdir}/usr/include -type f -exec chmod -x '{}' \;
}
